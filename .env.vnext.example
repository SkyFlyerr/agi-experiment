# ===================================================================
# Server Agent vNext: Configuration Template (.env.vnext.example)
# ===================================================================
# Copy this file to .env.vnext and fill in your actual values
# DO NOT commit .env.vnext to version control (it contains secrets)

# === DATABASE CONFIGURATION ===
# PostgreSQL connection string for async operations
DATABASE_URL=postgresql+asyncpg://user:password@postgres:5432/server_agent_vnext
# Fallback synchronous URL for migrations and tools
DATABASE_URL_SYNC=postgresql://user:password@postgres:5432/server_agent_vnext
# Number of database connection pool connections
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# === TELEGRAM BOT CONFIGURATION ===
# Bot token from @BotFather
TELEGRAM_BOT_TOKEN=your_bot_token_here
# Bot username without @ symbol
TELEGRAM_BOT_NAME=agi_superbot
# Telegram webhook URL for bot updates (required for production)
TELEGRAM_WEBHOOK_URL=https://your-domain.com/telegram/webhook
# Secret token for webhook validation (generate with: python -c "import secrets; print(secrets.token_urlsafe(32))")
TELEGRAM_WEBHOOK_SECRET=your_webhook_secret_token
# Chat IDs of master users (comma-separated for multiple masters)
MASTER_CHAT_IDS=46808774,12345678
# Max API requests per minute for Telegram API
TELEGRAM_RATE_LIMIT=30

# === TELEGRAM USER ACCOUNT (Optional: for proactive messaging) ===
# Get these from https://my.telegram.org in API development tools
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash
AGENT_TELEGRAM_PHONE=+1234567890

# === CLAUDE API CONFIGURATION ===
# OAuth token for Claude Code API access (from Claude setup)
CLAUDE_CODE_OAUTH_TOKEN=your_oauth_token_from_setup_token
# Base URL for Claude API (use https://api.anthropic.com for production)
CLAUDE_CODE_API_URL=https://api.anthropic.com/v1
# Maximum tokens per Claude API request (default: 4096)
CLAUDE_MAX_REQUEST_TOKENS=4096

# === HAIKU/SMALL MODEL CONFIGURATION ===
# API key for fallback small model (Claude Haiku or equivalent)
HAIKU_API_KEY=sk-ant-your-api-key
# Model identifier for quick decisions and categorization
HAIKU_MODEL=claude-haiku-4-5-20251001
# Token budget for Haiku calls (smaller budget for cost efficiency)
HAIKU_MAX_REQUEST_TOKENS=2048

# === TOKEN BUDGET & RATE LIMITING ===
# Daily token budget for proactive loops (prevents budget exhaustion)
PROACTIVE_DAILY_TOKEN_LIMIT=3000000
# Token threshold that triggers warning alerts to master
REACTIVE_TOKEN_WARNING_THRESHOLD=500000
# Token cost buffer to reserve for emergencies (percentage: 0.1 = 10%)
TOKEN_BUDGET_SAFETY_BUFFER=0.15

# === PROACTIVE SCHEDULING ===
# Minimum interval between proactive cycles (seconds)
PROACTIVE_MIN_INTERVAL_SECONDS=300
# Maximum interval between proactive cycles (seconds)
PROACTIVE_MAX_INTERVAL_SECONDS=3600
# Minimum thinking time before next cycle (prevents thrashing)
PROACTIVE_THINKING_COOLDOWN_SECONDS=60
# Time to wait for Telegram response before assuming unavailable
TELEGRAM_RESPONSE_TIMEOUT_SECONDS=30

# === APPROVAL & HUMAN INTERACTION ===
# Timeout for waiting for master approval (seconds)
APPROVAL_TIMEOUT_SECONDS=300
# Certainty threshold for autonomous action (0.0-1.0)
CERTAINTY_THRESHOLD=0.8
# Significance threshold for reporting to master (0.0-1.0)
SIGNIFICANCE_THRESHOLD=0.8

# === MESSAGE HISTORY & CONTEXT ===
# Number of messages to keep in context (affects memory and token usage)
MESSAGE_HISTORY_LIMIT=50
# Maximum conversation history length before automatic summarization
CONVERSATION_SUMMARY_THRESHOLD=100
# Number of recent summary batches to retain
SUMMARY_RETENTION_COUNT=5

# === MINIO OBJECT STORAGE (Optional) ===
# Enable MinIO for media storage
MINIO_ENABLED=false
# MinIO endpoint (S3 server URL)
MINIO_ENDPOINT=minio:9000
# MinIO access key
MINIO_ACCESS_KEY=minioadmin
# MinIO secret key
MINIO_SECRET_KEY=minioadmin
# Default bucket for agent data
MINIO_BUCKET=server-agent-vnext
# Use HTTPS for MinIO connection
MINIO_SECURE=false

# === LOGGING & DEBUGGING ===
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
# Enable detailed request/response logging
DEBUG_HTTP_REQUESTS=false
# Enable database query logging
DEBUG_DATABASE_QUERIES=false
# Directory for application logs
LOG_DIR=./logs
# Maximum log file size in MB before rotation
LOG_MAX_SIZE_MB=100
# Number of backup log files to keep
LOG_BACKUP_COUNT=5

# === APPLICATION SETTINGS ===
# Application environment (development, staging, production)
ENV=development
# Server port for FastAPI
APP_PORT=8000
# Server host (0.0.0.0 for all interfaces)
APP_HOST=0.0.0.0
# Enable CORS for web UI
CORS_ORIGINS=*
# Maximum request body size in bytes (10MB)
MAX_BODY_SIZE=10485760

# === SELF-SUFFICIENCY & REVENUE (Future) ===
# Enable experimental revenue generation features
REVENUE_ENABLED=false
# Preferred payment method (crypto_address, paypal, stripe)
REVENUE_METHOD=crypto_address
# Cryptocurrency address for receiving payments
CRYPTO_ADDRESS=your_ethereum_address
# Percentage of revenue to donate to charity (0.0-1.0)
CHARITY_DONATION_PERCENTAGE=0.5

# === RESOURCE MANAGEMENT ===
# CPU usage alert threshold (percentage)
CPU_ALERT_THRESHOLD=80
# Memory usage alert threshold (percentage)
MEMORY_ALERT_THRESHOLD=85
# Disk usage alert threshold (percentage)
DISK_ALERT_THRESHOLD=90
# Check interval for resource monitoring (seconds)
RESOURCE_CHECK_INTERVAL=300

# === SECURITY ===
# Enable HTTPS for webhook
WEBHOOK_HTTPS_ONLY=true
# IP whitelist for trusted connections (comma-separated, empty = all)
TRUSTED_IPS=
# Enable rate limiting for API endpoints
RATE_LIMIT_ENABLED=true
# Rate limit: requests per minute
RATE_LIMIT_REQUESTS_PER_MINUTE=100
